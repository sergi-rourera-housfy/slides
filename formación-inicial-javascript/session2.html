<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sesi√≥n 2: Funciones y scope</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Manrope", sans-serif;
        background: #1a1a1a;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        overflow: hidden;
        color: #333;
      }

      #slides-container {
        height: 100vh;
        aspect-ratio: 20 / 12;
        position: relative;
        background: white;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        overflow: hidden;
      }

      .slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transform: translateX(100%);
        transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        flex-direction: column;
        padding: 60px;
      }

      .slide.active {
        opacity: 1;
        transform: translateX(0);
        z-index: 2;
      }

      .slide.previous {
        opacity: 0;
        transform: translateX(-100%);
        z-index: 1;
      }

      .slide-title {
        font-size: 3em;
        font-weight: 800;
        color: #11aefa;
        margin-bottom: 40px;
        line-height: 1.2;
      }

      .step {
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.5s ease;
      }

      .step.visible {
        opacity: 1;
        transform: translateY(0);
      }

      .navigation {
        position: fixed;
        bottom: 30px;
        right: 30px;
        display: flex;
        gap: 15px;
        z-index: 1000;
      }

      .nav-button {
        background: #11aefa;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 20px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(17, 174, 250, 0.3);
      }

      .nav-button:hover {
        background: #0d8bc7;
        transform: scale(1.1);
      }

      .slide-counter {
        position: fixed;
        bottom: 30px;
        left: 30px;
        color: white;
        font-size: 1.2em;
        font-weight: 600;
        background: rgba(0, 0, 0, 0.5);
        padding: 10px 20px;
        border-radius: 25px;
        z-index: 1000;
      }

      .slide-cover {
        background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);
        justify-content: center;
        align-items: center;
        text-align: center;
      }

      .slide-cover .slide-title {
        color: white;
        font-size: 4.5em;
        margin-bottom: 20px;
      }

      .slide-cover .subtitle {
        color: rgba(255, 255, 255, 0.9);
        font-size: 2em;
        font-weight: 400;
      }

      .slide-content {
        background: white;
      }

      .slide-content .content {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 20px;
        font-size: 1.4em;
        line-height: 1.6;
      }

      .slide-content .content p {
        margin-bottom: 15px;
      }

      .slide-content .content ul {
        margin-left: 30px;
        list-style-type: none;
      }

      .slide-content .content ul li {
        margin-bottom: 15px;
        padding-left: 20px;
        position: relative;
      }

      .slide-content .content ul li:before {
        content: "‚úÖ";
        position: absolute;
        left: -10px;
      }

      .slide-code {
        background: #f8f9fa;
      }

      .slide-code pre {
        background: #1e1e1e;
        color: #d4d4d4;
        padding: 30px;
        border-radius: 15px;
        font-size: 1.2em;
        line-height: 1.6;
        overflow-x: auto;
        margin-bottom: 20px;
      }

      .slide-code .explanation {
        background: white;
        padding: 20px;
        border-radius: 10px;
        font-size: 1.3em;
        border-left: 4px solid #8b5cf6;
      }

      .slide-table {
        background: white;
      }

      .slide-table table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        font-size: 1.3em;
      }

      .slide-table th {
        background: #8b5cf6;
        color: white;
        padding: 20px;
        text-align: left;
        font-weight: 600;
      }

      .slide-table td {
        padding: 20px;
        border-bottom: 2px solid #f0f0f0;
      }

      .slide-table tr:hover {
        background: #f8f9fa;
      }

      .slide-exercise {
        background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      }

      .slide-exercise .slide-title {
        color: white;
      }

      .slide-exercise .exercise-box {
        background: white;
        padding: 30px;
        border-radius: 15px;
        font-size: 1.3em;
        line-height: 1.6;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .slide-exercise pre {
        background: #1e1e1e;
        color: #d4d4d4;
        padding: 20px;
        border-radius: 10px;
        margin-top: 15px;
        overflow-x: auto;
      }

      .slide-solution {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      }

      .slide-solution .slide-title {
        color: white;
      }

      .slide-solution pre {
        background: #1e1e1e;
        color: #d4d4d4;
        padding: 25px;
        border-radius: 15px;
        font-size: 1.1em;
        line-height: 1.5;
        overflow-x: auto;
      }

      .slide-summary {
        background: #8b5cf6;
      }

      .slide-summary .slide-title {
        color: white;
      }

      .slide-summary .summary-box {
        background: white;
        padding: 40px;
        border-radius: 20px;
        font-size: 1.4em;
      }

      .slide-summary .summary-box h3 {
        color: #8b5cf6;
        margin-bottom: 20px;
        font-size: 1.3em;
      }

      .slide-summary .summary-box ul {
        list-style: none;
      }

      .slide-summary .summary-box li {
        margin-bottom: 15px;
        padding-left: 30px;
        position: relative;
      }

      .slide-summary .summary-box li:before {
        content: "‚úÖ";
        position: absolute;
        left: 0;
      }
    </style>
  </head>
  <body>
    <div id="slides-container">
      <!-- Slide 1: Portada -->
      <div class="slide slide-cover active" data-slide="1">
        <div class="step visible">
          <h1 class="slide-title">üõ†Ô∏è SESI√ìN 2</h1>
        </div>
        <div class="step">
          <p class="subtitle">Funciones y scope</p>
        </div>
      </div>

      <!-- Slide 2: ¬øQu√© es una funci√≥n? -->
      <div class="slide slide-code" data-slide="2">
        <h2 class="slide-title">üéØ ¬øQu√© es una funci√≥n?</h2>
        <div class="step">
          <div class="explanation">
            <strong>Definici√≥n simple:</strong> Una "receta" que puedes
            reutilizar
          </div>
        </div>
        <div class="step">
          <pre>
// Sin funci√≥n (repetitivo)
const precio1ConIVA = 100 * 1.21;
const precio2ConIVA = 50 * 1.21;
const precio3ConIVA = 200 * 1.21;

// Con funci√≥n (reutilizable)
function calcularConIVA(precio) {
  return precio * 1.21;
}

const precio1ConIVA = calcularConIVA(100);
const precio2ConIVA = calcularConIVA(50);
const precio3ConIVA = calcularConIVA(200);</pre
          >
        </div>
      </div>

      <!-- Slide 3: Anatom√≠a de una funci√≥n -->
      <div class="slide slide-code" data-slide="3">
        <h2 class="slide-title">üî¨ Anatom√≠a de una funci√≥n</h2>
        <div class="step">
          <pre>
function nombreFuncion(parametro1, parametro2) {
  // C√≥digo que hace cosas
  const resultado = parametro1 + parametro2;
  return resultado;
}

// Usar la funci√≥n
const suma = nombreFuncion(5, 3); // suma = 8</pre
          >
        </div>
        <div class="step">
          <div class="explanation">
            <strong>Partes:</strong><br />
            ‚Ä¢ <code>function</code> = palabra clave<br />
            ‚Ä¢ <code>nombreFuncion</code> = nombre descriptivo<br />
            ‚Ä¢ <code>(parametros)</code> = datos que recibe<br />
            ‚Ä¢ <code>return</code> = resultado que devuelve
          </div>
        </div>
      </div>

      <!-- Slide 4: Funciones flecha -->
      <div class="slide slide-code" data-slide="4">
        <h2 class="slide-title">‚û°Ô∏è Funciones flecha (arrow functions)</h2>
        <div class="step">
          <pre>
// Funci√≥n tradicional
function sumar(a, b) {
  return a + b;
}

// Funci√≥n flecha (moderna)
const sumar = (a, b) => {
  return a + b;
};

// Funci√≥n flecha corta (sin llaves ni return)
const sumar = (a, b) => a + b;

// Si solo hay 1 par√°metro, puedes omitir par√©ntesis
const duplicar = x => x * 2;</pre
          >
        </div>
        <div class="step">
          <div class="explanation">
            <strong>En n8n:</strong> Ver√°s mucho las funciones flecha en
            ejemplos
          </div>
        </div>
      </div>

      <!-- Slide 5: Comparaci√≥n de estilos -->
      <div class="slide slide-table" data-slide="5">
        <h2 class="slide-title">üìä Comparaci√≥n de estilos</h2>
        <div class="step">
          <table>
            <thead>
              <tr>
                <th>Tradicional</th>
                <th>Flecha</th>
                <th>Flecha corta</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>function suma(a,b) { return a+b; }</code></td>
                <td><code>const suma = (a,b) => { return a+b; }</code></td>
                <td><code>const suma = (a,b) => a+b;</code></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="step">
          <div style="margin-top: 30px; font-size: 1.3em">
            <strong>¬øCu√°l usar?</strong><br />
            ‚Ä¢ Ambas funcionan igual en n8n<br />
            ‚Ä¢ Flecha corta es m√°s legible para funciones simples<br />
            ‚Ä¢ Tradicional es m√°s clara si eres principiante
          </div>
        </div>
      </div>

      <!-- Slide 6: Par√°metros con valores por defecto -->
      <div class="slide slide-code" data-slide="6">
        <h2 class="slide-title">üéõÔ∏è Par√°metros y valores por defecto</h2>
        <div class="step">
          <pre>
// Sin valor por defecto
const saludar = (nombre) => {
  return `Hola ${nombre}`;
};
saludar(); // "Hola undefined" ‚ùå

// Con valor por defecto
const saludar = (nombre = "Usuario") => {
  return `Hola ${nombre}`;
};
saludar();           // "Hola Usuario" ‚úÖ
saludar("Mar√≠a");    // "Hola Mar√≠a" ‚úÖ</pre
          >
        </div>
      </div>

      <!-- Slide 7: M√∫ltiples par√°metros -->
      <div class="slide slide-code" data-slide="7">
        <h2 class="slide-title">üî¢ M√∫ltiples par√°metros</h2>
        <div class="step">
          <pre>
// Calcular precio final con descuento e IVA
const calcularPrecioFinal = (precioBase, descuento, iva) => {
  const conDescuento = precioBase - descuento;
  const conIVA = conDescuento * (1 + iva);
  return conIVA;
};

const precioFinal = calcularPrecioFinal(100, 20, 0.21);
// 100 - 20 = 80
// 80 * 1.21 = 96.8</pre
          >
        </div>
      </div>

      <!-- Slide 8: Return m√∫ltiple -->
      <div class="slide slide-code" data-slide="8">
        <h2 class="slide-title">üì¶ Return m√∫ltiple (objeto)</h2>
        <div class="step">
          <pre>
// Devolver varios valores
const analizarPedido = (total) => {
  const iva = total * 0.21;
  const sinIVA = total - iva;
  
  return {
    total: total,
    iva: iva,
    sinIVA: sinIVA
  };
};

const resultado = analizarPedido(121);
// { total: 121, iva: 25.41, sinIVA: 95.59 }</pre
          >
        </div>
      </div>

      <!-- Slide 9: Scope -->
      <div class="slide slide-code" data-slide="9">
        <h2 class="slide-title">üéØ Scope (alcance de variables)</h2>
        <div class="step">
          <pre>
const global = "Soy global"; // ‚úÖ Accesible en todas partes

function miFuncion() {
  const local = "Soy local"; // ‚úÖ Solo existe aqu√≠ dentro
  console.log(global);  // ‚úÖ Funciona
  console.log(local);   // ‚úÖ Funciona
}

console.log(global);    // ‚úÖ Funciona
console.log(local);     // ‚ùå ERROR: local no existe aqu√≠</pre
          >
        </div>
        <div class="step">
          <div class="explanation">
            <strong>Regla:</strong> Las variables declaradas dentro de una
            funci√≥n solo existen ah√≠
          </div>
        </div>
      </div>

      <!-- Slide 10: Ejercicio 1 -->
      <div class="slide slide-exercise" data-slide="10">
        <h2 class="slide-title">üèãÔ∏è EJERCICIO PR√ÅCTICO 1</h2>
        <div class="step">
          <div class="exercise-box">
            <p><strong>Crear funci√≥n validadora de emails</strong></p>
            <pre>
// TU MISI√ìN:
// Crear una funci√≥n que reciba un email
// y devuelva true si contiene "@" y ".", false si no

// Pista: usa el m√©todo .includes()
// "hola@test.com".includes("@") // true

// Ejemplos:
// validarEmail("usuario@test.com") ‚Üí true
// validarEmail("invalido.com") ‚Üí false
// validarEmail("sin-arroba.es") ‚Üí false</pre
            >
          </div>
        </div>
      </div>

      <!-- Slide 11: Soluci√≥n 1 -->
      <div class="slide slide-solution" data-slide="11">
        <h2 class="slide-title">‚úÖ SOLUCI√ìN EJERCICIO 1</h2>
        <div class="step">
          <pre>
const validarEmail = (email) => {
  const tieneArroba = email.includes("@");
  const tienePunto = email.includes(".");
  
  return tieneArroba && tienePunto;
};

// Versi√≥n corta
const validarEmail = (email) => {
  return email.includes("@") && email.includes(".");
};

// Versi√≥n ultra-corta
const validarEmail = email => email.includes("@") && email.includes(".");

// Pruebas
console.log(validarEmail("usuario@test.com")); // true
console.log(validarEmail("invalido.com"));      // false</pre
          >
        </div>
      </div>

      <!-- Slide 12: Ejercicio 2 -->
      <div class="slide slide-exercise" data-slide="12">
        <h2 class="slide-title">üèãÔ∏è EJERCICIO PR√ÅCTICO 2 (n8n real)</h2>
        <div class="step">
          <div class="exercise-box">
            <p><strong>Caso:</strong> Filtrar contactos v√°lidos</p>
            <pre>
// INPUT en n8n: Lista de contactos
const contactos = [
  { nombre: "Ana", email: "ana@test.com" },
  { nombre: "Luis", email: "sin-arroba.com" },
  { nombre: "Mar√≠a", email: "maria@empresa.es" },
  { nombre: "Pedro", email: "" }
];

// TU MISI√ìN:
// 1. Crear funci√≥n validarEmail (del ejercicio anterior)
// 2. Filtrar solo contactos con email v√°lido
// 3. Devolver array con contactos v√°lidos</pre
            >
          </div>
        </div>
      </div>

      <!-- Slide 13: Soluci√≥n 2 -->
      <div class="slide slide-solution" data-slide="13">
        <h2 class="slide-title">‚úÖ SOLUCI√ìN EJERCICIO 2</h2>
        <div class="step">
          <pre>
// Funci√≥n validadora
const validarEmail = email => email.includes("@") && email.includes(".");

// Filtrar contactos
const contactosValidos = [];

for (let i = 0; i < contactos.length; i++) {
  const contacto = contactos[i];
  if (validarEmail(contacto.email)) {
    contactosValidos.push(contacto);
  }
}

return contactosValidos;
// Resultado: [
//   { nombre: "Ana", email: "ana@test.com" },
//   { nombre: "Mar√≠a", email: "maria@empresa.es" }
// ]</pre
          >
        </div>
      </div>

      <!-- Slide 14: Closures -->
      <div class="slide slide-code" data-slide="14">
        <h2 class="slide-title">üîí Closures (nivel b√°sico)</h2>
        <div class="step">
          <pre>
// Una funci√≥n que crea otra funci√≥n
const crearSaludador = (saludo) => {
  return (nombre) => {
    return `${saludo}, ${nombre}`;
  };
};

const saludoFormal = crearSaludador("Buenos d√≠as");
const saludoInformal = crearSaludador("Hola");

console.log(saludoFormal("Sr. L√≥pez"));   // "Buenos d√≠as, Sr. L√≥pez"
console.log(saludoInformal("Mar√≠a"));     // "Hola, Mar√≠a"</pre
          >
        </div>
        <div class="step">
          <div class="explanation">
            <strong>√ötil en n8n:</strong> Para crear funciones personalizadas
            seg√∫n contexto
          </div>
        </div>
      </div>

      <!-- Slide 15: Funciones como par√°metros -->
      <div class="slide slide-code" data-slide="15">
        <h2 class="slide-title">üé≠ Funciones como par√°metros</h2>
        <div class="step">
          <pre>
// Funci√≥n que recibe otra funci√≥n
const aplicarOperacion = (numero, operacion) => {
  return operacion(numero);
};

const duplicar = x => x * 2;
const triplicar = x => x * 3;

console.log(aplicarOperacion(5, duplicar));   // 10
console.log(aplicarOperacion(5, triplicar));  // 15</pre
          >
        </div>
        <div class="step">
          <div class="explanation">
            <strong>Preview:</strong> Esto es la base de <code>.map()</code>,
            <code>.filter()</code> (pr√≥xima sesi√≥n)
          </div>
        </div>
      </div>

      <!-- Slide 16: Resumen -->
      <div class="slide slide-summary" data-slide="16">
        <h2 class="slide-title">üìù Resumen Sesi√≥n 2</h2>
        <div class="step">
          <div class="summary-box">
            <h3>Has aprendido:</h3>
            <ul>
              <li>Crear funciones (tradicionales y flecha)</li>
              <li>Par√°metros y return</li>
              <li>Scope (alcance de variables)</li>
              <li>Reutilizar c√≥digo eficientemente</li>
              <li>Validar datos en n8n</li>
            </ul>
            <p style="margin-top: 30px; font-size: 1.2em">
              <strong>Pr√≥xima sesi√≥n:</strong> Arrays y objetos a fondo (map,
              filter, reduce) üöÄ
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Navegaci√≥n -->
    <div class="navigation">
      <button class="nav-button" id="prev-btn" title="Anterior">‚Üê</button>
      <button class="nav-button" id="next-btn" title="Siguiente">‚Üí</button>
    </div>

    <!-- Contador -->
    <div class="slide-counter">
      <span id="current-slide">1</span> / <span id="total-slides">16</span>
    </div>

    <script>
      class SlideShow {
        constructor() {
          this.slides = document.querySelectorAll(".slide");
          this.currentSlideIndex = 0;
          this.currentStepIndex = 0;
          this.totalSlides = this.slides.length;
          this.init();
        }

        init() {
          document.getElementById("total-slides").textContent =
            this.totalSlides;
          document
            .getElementById("next-btn")
            .addEventListener("click", () => this.next());
          document
            .getElementById("prev-btn")
            .addEventListener("click", () => this.previous());

          document.addEventListener("keydown", (e) => {
            if (e.key === "ArrowRight" || e.key === " ") {
              e.preventDefault();
              this.next();
            } else if (e.key === "ArrowLeft") {
              e.preventDefault();
              this.previous();
            }
          });

          document
            .getElementById("slides-container")
            .addEventListener("click", (e) => {
              if (!e.target.closest(".nav-button")) {
                this.next();
              }
            });

          this.showSlide(0);
        }

        getCurrentSlide() {
          return this.slides[this.currentSlideIndex];
        }

        getSteps(slide) {
          return slide.querySelectorAll(".step");
        }

        next() {
          const currentSlide = this.getCurrentSlide();
          const steps = this.getSteps(currentSlide);

          if (this.currentStepIndex < steps.length - 1) {
            this.currentStepIndex++;
            steps[this.currentStepIndex].classList.add("visible");
          } else if (this.currentSlideIndex < this.totalSlides - 1) {
            this.goToSlide(this.currentSlideIndex + 1);
          }
        }

        previous() {
          const currentSlide = this.getCurrentSlide();
          const steps = this.getSteps(currentSlide);

          if (this.currentStepIndex > 0) {
            steps[this.currentStepIndex].classList.remove("visible");
            this.currentStepIndex--;
          } else if (this.currentSlideIndex > 0) {
            this.goToSlide(this.currentSlideIndex - 1, true);
          }
        }

        goToSlide(index, showAllSteps = false) {
          if (index < 0 || index >= this.totalSlides) return;

          const currentSlide = this.getCurrentSlide();
          currentSlide.classList.remove("active");
          currentSlide.classList.add("previous");

          const currentSteps = this.getSteps(currentSlide);
          currentSteps.forEach((step) => step.classList.remove("visible"));

          this.currentSlideIndex = index;

          const newSlide = this.getCurrentSlide();
          newSlide.classList.remove("previous");
          newSlide.classList.add("active");

          const newSteps = this.getSteps(newSlide);

          if (showAllSteps) {
            this.currentStepIndex = newSteps.length - 1;
            newSteps.forEach((step) => step.classList.add("visible"));
          } else {
            this.currentStepIndex = 0;
            if (newSteps.length > 0) {
              newSteps[0].classList.add("visible");
            }
          }

          this.updateCounter();
        }

        showSlide(index) {
          this.goToSlide(index);
        }

        updateCounter() {
          document.getElementById("current-slide").textContent =
            this.currentSlideIndex + 1;
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        new SlideShow();
      });
    </script>
  </body>
</html>
